<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Paparazzi UAS: sw/airborne/modules/ctrl/optical_flow_landing.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="penguin_icon.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Paparazzi UAS
   &#160;<span id="projectnumber">v5.11_devel-11-g4d405cd-dirty</span>
   </div>
   <div id="projectbrief">Paparazzi is a free software Unmanned Aircraft System.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('optical__flow__landing_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Modules</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">optical_flow_landing.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This module implements optical flow landings in which the divergence is kept constant.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;std.h&quot;</code><br />
</div><div class="textblock"><div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Include dependency graph for optical_flow_landing.h:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h__incl.png" border="0" usemap="#sw_2airborne_2modules_2ctrl_2optical__flow__landing_8h" alt=""/></div>
<map name="sw_2airborne_2modules_2ctrl_2optical__flow__landing_8h" id="sw_2airborne_2modules_2ctrl_2optical__flow__landing_8h">
</map>
</div>
</div><div class="textblock"><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="closed.png" alt="+"/> This graph shows which files directly or indirectly include this file:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h__dep__incl.png" border="0" usemap="#sw_2airborne_2modules_2ctrl_2optical__flow__landing_8hdep" alt=""/></div>
<map name="sw_2airborne_2modules_2ctrl_2optical__flow__landing_8hdep" id="sw_2airborne_2modules_2ctrl_2optical__flow__landing_8hdep">
<area shape="rect" id="node2" href="optical__flow__landing_8c.html" title="This module implements optical flow landings in which the divergence is kept constant. " alt="" coords="6,95,193,136"/></map>
</div>
</div>
<p><a href="optical__flow__landing_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:structOpticalFlowLanding"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#structOpticalFlowLanding">OpticalFlowLanding</a></td></tr>
<tr class="separator:structOpticalFlowLanding"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a46a737bcf1cfcfb1da20ff9f70a9a012"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>&#160;&#160;&#160;60</td></tr>
<tr class="separator:a46a737bcf1cfcfb1da20ff9f70a9a012"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1204ab358ff89918b7365faa943bcbd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ad1204ab358ff89918b7365faa943bcbd">GUIDANCE_H_MODE_MODULE_SETTING</a>&#160;&#160;&#160;<a class="el" href="guidance__h_8h.html#a2f2f695a8fcb314dc64bf0b82811937d">GUIDANCE_H_MODE_HOVER</a></td></tr>
<tr class="separator:ad1204ab358ff89918b7365faa943bcbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a530e2bc7468050db21efc20f40ec79f5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a530e2bc7468050db21efc20f40ec79f5">GUIDANCE_V_MODE_MODULE_SETTING</a>&#160;&#160;&#160;<a class="el" href="rotorcraft_2guidance_2guidance__v_8h.html#ae0541af6ebdc6c4021a2bb5922663a6e">GUIDANCE_V_MODE_MODULE</a></td></tr>
<tr class="separator:a530e2bc7468050db21efc20f40ec79f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac57755bb0d4696725a402004aabac907"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ac57755bb0d4696725a402004aabac907">get_cov</a> (float *a, float *b, int n_elements)</td></tr>
<tr class="memdesc:ac57755bb0d4696725a402004aabac907"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the covariance of two arrays.  <a href="#ac57755bb0d4696725a402004aabac907">More...</a><br /></td></tr>
<tr class="separator:ac57755bb0d4696725a402004aabac907"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a163c737b124aa1ec4e930e6ab400ed03"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a163c737b124aa1ec4e930e6ab400ed03">get_mean_array</a> (float *a, int n_elements)</td></tr>
<tr class="memdesc:a163c737b124aa1ec4e930e6ab400ed03"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the mean value of an array.  <a href="#a163c737b124aa1ec4e930e6ab400ed03">More...</a><br /></td></tr>
<tr class="separator:a163c737b124aa1ec4e930e6ab400ed03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aece761223f0736157bdfeb9aa98124b7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#aece761223f0736157bdfeb9aa98124b7">reset_all_vars</a> (void)</td></tr>
<tr class="memdesc:aece761223f0736157bdfeb9aa98124b7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset all variables:  <a href="#aece761223f0736157bdfeb9aa98124b7">More...</a><br /></td></tr>
<tr class="separator:aece761223f0736157bdfeb9aa98124b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a535ad2dedb628ec10707a6c0448c525e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a535ad2dedb628ec10707a6c0448c525e">guidance_v_module_init</a> (void)</td></tr>
<tr class="separator:a535ad2dedb628ec10707a6c0448c525e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1288433c507106e865034b02ae79b2d6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a1288433c507106e865034b02ae79b2d6">guidance_v_module_enter</a> (void)</td></tr>
<tr class="memdesc:a1288433c507106e865034b02ae79b2d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Entering the module (user switched to module)  <a href="#a1288433c507106e865034b02ae79b2d6">More...</a><br /></td></tr>
<tr class="separator:a1288433c507106e865034b02ae79b2d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a24ef9289dfa15084a7457a97ad7632c8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a24ef9289dfa15084a7457a97ad7632c8">guidance_v_module_run</a> (bool in_flight)</td></tr>
<tr class="separator:a24ef9289dfa15084a7457a97ad7632c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad4982b2ef527a9bb63dad1833b51849b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="optical__flow__landing_8h.html#structOpticalFlowLanding">OpticalFlowLanding</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ad4982b2ef527a9bb63dad1833b51849b">of_landing_ctrl</a></td></tr>
<tr class="separator:ad4982b2ef527a9bb63dad1833b51849b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa52eb09390dbc1cae0f95dd381102222"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#aa52eb09390dbc1cae0f95dd381102222">thrust_history</a> [<a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>]</td></tr>
<tr class="separator:aa52eb09390dbc1cae0f95dd381102222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea32ad205a304c026e2cd2e37ac33464"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#aea32ad205a304c026e2cd2e37ac33464">divergence_history</a> [<a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>]</td></tr>
<tr class="separator:aea32ad205a304c026e2cd2e37ac33464"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95aaca4bdf4764a46ba341dda9d60655"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#a95aaca4bdf4764a46ba341dda9d60655">past_divergence_history</a> [<a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>]</td></tr>
<tr class="separator:a95aaca4bdf4764a46ba341dda9d60655"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae46d2d56ee2b826a6d4ca275c92f52b3"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="optical__flow__landing_8h.html#ae46d2d56ee2b826a6d4ca275c92f52b3">ind_hist</a></td></tr>
<tr class="separator:ae46d2d56ee2b826a6d4ca275c92f52b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This module implements optical flow landings in which the divergence is kept constant. </p>
<p>When using a fixed gain for control, the covariance between thrust and divergence is tracked, so that the drone knows when it has arrived close to the landing surface. Then, a final landing procedure is triggered. It can also be set to adaptive gain control, where the goal is to continuously gauge the distance to the landing surface. In this mode, the drone will oscillate all the way down to the surface.</p>
<p>de Croon, G.C.H.E. (2016). Monocular distance estimation with optical flow maneuvers and efference copies: a stability-based strategy. Bioinspiration &amp; biomimetics, 11(1), 016004. <a href="http://iopscience.iop.org/article/10.1088/1748-3190/11/1/016004">http://iopscience.iop.org/article/10.1088/1748-3190/11/1/016004</a> </p>

<p>Definition in file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>
</div><hr/><h2 class="groupheader">Data Structure Documentation</h2>
<a name="structOpticalFlowLanding" id="structOpticalFlowLanding"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct OpticalFlowLanding</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock">
<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00044">44</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>
</div><table class="fieldtable">
<tr><th colspan="3">Data Fields</th></tr>
<tr><td class="fieldtype">
<a class="anchor" id="adf12a6652830210bcc598c69f4364d1c"></a>float</td>
<td class="fieldname">
agl</td>
<td class="fielddoc">
agl = height from sonar (only used when using "fake" divergence) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="aca9b6b6640bfc11e274a0416332de2ca"></a>float</td>
<td class="fieldname">
agl_lp</td>
<td class="fielddoc">
low-pass version of agl </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="adb18f8ad12be78922ab9f5b7745f405e"></a>int</td>
<td class="fieldname">
CONTROL_METHOD</td>
<td class="fielddoc">
type of divergence control: 0 = fixed gain, 1 = adaptive gain </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a319e0db7767c18d86e098709b3f1a26e"></a>float</td>
<td class="fieldname">
cov_limit</td>
<td class="fielddoc">
for fixed gain control, what is the cov limit triggering the landing </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a39a8d886f5a2880125d4f4f9cf32900f"></a>int</td>
<td class="fieldname">
COV_METHOD</td>
<td class="fielddoc">
method to calculate the covariance: between thrust and div (0) or div and div past (1) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a2fcfe83147a3d61d26d8ebdd1b638360"></a>float</td>
<td class="fieldname">
cov_set_point</td>
<td class="fielddoc">
for adaptive gain control, setpoint of the covariance (oscillations) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ac726d29435381ec586cd913c8dd23323"></a>int</td>
<td class="fieldname">
delay_steps</td>
<td class="fielddoc">
number of delay steps for div past </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a30f4ee1bc41fd2b10efdae515b6404c0"></a>float</td>
<td class="fieldname">
dgain</td>
<td class="fielddoc">
D-gain for constant divergence control. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a05f97bef53de779bbecbe98d5b33762f"></a>float</td>
<td class="fieldname">
dgain_adaptive</td>
<td class="fielddoc">
D-gain for adaptive gain control. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a74a182d3b575454ab7b7b3aa4c854044"></a>float</td>
<td class="fieldname">
divergence_setpoint</td>
<td class="fielddoc">
setpoint for constant divergence approach </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0aa113a5ef979045542fe39aeb226e2c"></a>float</td>
<td class="fieldname">
igain</td>
<td class="fielddoc">
I-gain for constant divergence control. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a1ef5923b467e6b890a11c8f1e4b6f803"></a>float</td>
<td class="fieldname">
igain_adaptive</td>
<td class="fielddoc">
I-gain for adaptive gain control. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a44b05791624038b05c5f54f8c36acae3"></a>float</td>
<td class="fieldname">
lp_factor</td>
<td class="fielddoc">
low-pass factor in [0,1], with 0 purely using the current measurement </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="ad95057af54e801ec3faec34b48c28036"></a>float</td>
<td class="fieldname">
nominal_thrust</td>
<td class="fielddoc">
nominal thrust around which the PID-control operates </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a344885f8fab2000105a17983f248e13b"></a>float</td>
<td class="fieldname">
pgain</td>
<td class="fielddoc">
P-gain for constant divergence control (from divergence error to thrust) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a7c544e7e5e10d376e2811e2467cbfcf6"></a>float</td>
<td class="fieldname">
pgain_adaptive</td>
<td class="fielddoc">
P-gain for adaptive gain control. </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="abb577f7f1f500baea2dcbf58f35f906c"></a>float</td>
<td class="fieldname">
sum_err</td>
<td class="fielddoc">
integration of the error for I-gain </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a61d4fee4543f010e70afb17d7d9530fa"></a>float</td>
<td class="fieldname">
vel</td>
<td class="fielddoc">
vertical velocity as determined with sonar (only used when using "fake" divergence) </td></tr>
<tr><td class="fieldtype">
<a class="anchor" id="a0f9c3994677f7b802d32da860a3395e0"></a>int</td>
<td class="fieldname">
VISION_METHOD</td>
<td class="fielddoc">
whether to use vision (1) or Optitrack / sonar (0) </td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a46a737bcf1cfcfb1da20ff9f70a9a012"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define COV_WINDOW_SIZE&#160;&#160;&#160;60</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00039">39</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00501">guidance_v_module_enter()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00194">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00131">vertical_ctrl_module_init()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
<a class="anchor" id="ad1204ab358ff89918b7365faa943bcbd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GUIDANCE_H_MODE_MODULE_SETTING&#160;&#160;&#160;<a class="el" href="guidance__h_8h.html#a2f2f695a8fcb314dc64bf0b82811937d">GUIDANCE_H_MODE_HOVER</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00076">76</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

</div>
</div>
<a class="anchor" id="a530e2bc7468050db21efc20f40ec79f5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GUIDANCE_V_MODE_MODULE_SETTING&#160;&#160;&#160;<a class="el" href="rotorcraft_2guidance_2guidance__v_8h.html#ae0541af6ebdc6c4021a2bb5922663a6e">GUIDANCE_V_MODE_MODULE</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00079">79</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac57755bb0d4696725a402004aabac907"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_cov </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the covariance of two arrays. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">cov</td><td>The covariance </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*a</td><td>The first array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*b</td><td>The second array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of elements in the arrays </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00459">459</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p>References <a class="el" href="optical__flow__landing_8c_source.html#l00440">get_mean_array()</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

<p><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_cgraph.png" border="0" usemap="#optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_cgraph" alt=""/></div>
<map name="optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_cgraph" id="optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_cgraph">
<area shape="rect" id="node2" href="optical__flow__landing_8c.html#a163c737b124aa1ec4e930e6ab400ed03" title="Get the mean value of an array. " alt="" coords="125,5,252,32"/></map>
</div>
</p>

<p><div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_icgraph.png" border="0" usemap="#optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_icgraph" alt=""/></div>
<map name="optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_icgraph" id="optical__flow__landing_8h_ac57755bb0d4696725a402004aabac907_icgraph">
<area shape="rect" id="node2" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module. " alt="" coords="125,5,304,32"/><area shape="rect" id="node3" href="vertical__ctrl__module__demo_8h.html#a24ef9289dfa15084a7457a97ad7632c8" title="guidance_v_module_run" alt="" coords="352,5,529,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a163c737b124aa1ec4e930e6ab400ed03"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float get_mean_array </td>
          <td>(</td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>n_elements</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the mean value of an array. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mean</td><td>The mean value </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">*a</td><td>The array </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>Number of elements in the array </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00440">440</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00459">get_cov()</a>.</p>

<p><div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_a163c737b124aa1ec4e930e6ab400ed03_icgraph.png" border="0" usemap="#optical__flow__landing_8h_a163c737b124aa1ec4e930e6ab400ed03_icgraph" alt=""/></div>
<map name="optical__flow__landing_8h_a163c737b124aa1ec4e930e6ab400ed03_icgraph" id="optical__flow__landing_8h_a163c737b124aa1ec4e930e6ab400ed03_icgraph">
<area shape="rect" id="node2" href="optical__flow__landing_8h.html#ac57755bb0d4696725a402004aabac907" title="Get the covariance of two arrays. " alt="" coords="180,5,252,32"/><area shape="rect" id="node3" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module. " alt="" coords="300,5,479,32"/><area shape="rect" id="node4" href="vertical__ctrl__module__demo_8h.html#a24ef9289dfa15084a7457a97ad7632c8" title="guidance_v_module_run" alt="" coords="527,5,704,32"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="a1288433c507106e865034b02ae79b2d6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void guidance_v_module_enter </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Entering the module (user switched to module) </p>

<p>Definition at line <a class="el" href="ctrl__module__demo_8c_source.html#l00111">111</a> of file <a class="el" href="ctrl__module__demo_8c_source.html">ctrl_module_demo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a535ad2dedb628ec10707a6c0448c525e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void guidance_v_module_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="ctrl__module__demo_8c_source.html#l00105">105</a> of file <a class="el" href="ctrl__module__demo_8c_source.html">ctrl_module_demo.c</a>.</p>

</div>
</div>
<a class="anchor" id="a24ef9289dfa15084a7457a97ad7632c8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void guidance_v_module_run </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>in_flight</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00526">526</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

</div>
</div>
<a class="anchor" id="aece761223f0736157bdfeb9aa98124b7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void reset_all_vars </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset all variables: </p>

<p>Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00194">194</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p>References <a class="el" href="optical__flow__landing_8h_source.html#l00046">OpticalFlowLanding::agl_lp</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00041">cov_div</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00057">OpticalFlowLanding::cov_set_point</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00039">COV_WINDOW_SIZE</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00037">divergence</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00070">divergence_history</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00049">OpticalFlowLanding::divergence_setpoint</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00044">dt</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00072">ind_hist</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00047">landing</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00040">normalized_thrust</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00123">of_landing_ctrl</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00049">previous_cov_err</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00048">previous_err</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00046">previous_message_nr</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00062">previous_time</a>, <a class="el" href="stabilization_8c_source.html#l00028">stabilization_cmd</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00053">OpticalFlowLanding::sum_err</a>, <a class="el" href="optical__flow__landing_8h_source.html#l00069">thrust_history</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00045">vision_message_nr</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

<p><div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><img src="optical__flow__landing_8h_aece761223f0736157bdfeb9aa98124b7_icgraph.png" border="0" usemap="#optical__flow__landing_8h_aece761223f0736157bdfeb9aa98124b7_icgraph" alt=""/></div>
<map name="optical__flow__landing_8h_aece761223f0736157bdfeb9aa98124b7_icgraph" id="optical__flow__landing_8h_aece761223f0736157bdfeb9aa98124b7_icgraph">
<area shape="rect" id="node2" href="optical__flow__landing_8c.html#a9628e4f2b9a046bb7ff80c208ab85daa" title="Run the optical flow landing module. " alt="" coords="164,5,343,32"/><area shape="rect" id="node3" href="vertical__ctrl__module__demo_8h.html#a24ef9289dfa15084a7457a97ad7632c8" title="guidance_v_module_run" alt="" coords="391,5,568,32"/></map>
</div>
</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aea32ad205a304c026e2cd2e37ac33464"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float divergence_history[<a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00070">70</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00501">guidance_v_module_enter()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00194">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00131">vertical_ctrl_module_init()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
<a class="anchor" id="ae46d2d56ee2b826a6d4ca275c92f52b3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long ind_hist</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00072">72</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00501">guidance_v_module_enter()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00194">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00131">vertical_ctrl_module_init()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
<a class="anchor" id="ad4982b2ef527a9bb63dad1833b51849b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="optical__flow__landing_8h.html#structOpticalFlowLanding">OpticalFlowLanding</a> of_landing_ctrl</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8c_source.html#l00123">123</a> of file <a class="el" href="optical__flow__landing_8c_source.html">optical_flow_landing.c</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00501">guidance_v_module_enter()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00194">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00065">send_divergence()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00479">vertical_ctrl_agl_cb()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00131">vertical_ctrl_module_init()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
<a class="anchor" id="a95aaca4bdf4764a46ba341dda9d60655"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float past_divergence_history[<a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00071">71</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
<a class="anchor" id="aa52eb09390dbc1cae0f95dd381102222"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float thrust_history[<a class="el" href="optical__flow__landing_8h.html#a46a737bcf1cfcfb1da20ff9f70a9a012">COV_WINDOW_SIZE</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="optical__flow__landing_8h_source.html#l00069">69</a> of file <a class="el" href="optical__flow__landing_8h_source.html">optical_flow_landing.h</a>.</p>

<p>Referenced by <a class="el" href="optical__flow__landing_8c_source.html#l00501">guidance_v_module_enter()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00194">reset_all_vars()</a>, <a class="el" href="optical__flow__landing_8c_source.html#l00131">vertical_ctrl_module_init()</a>, and <a class="el" href="optical__flow__landing_8c_source.html#l00224">vertical_ctrl_module_run()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_01fcd3835fb4e7d9331b722d86291b65.html">sw</a></li><li class="navelem"><a class="el" href="dir_5e9153041680afc3c016fd52fa730b56.html">airborne</a></li><li class="navelem"><a class="el" href="dir_c2abcdd6ccb39c3582929c0e3f5651c2.html">modules</a></li><li class="navelem"><a class="el" href="dir_94757629c544be2d6d24b01569be56e6.html">ctrl</a></li><li class="navelem"><a class="el" href="optical__flow__landing_8h.html">optical_flow_landing.h</a></li>
    <li class="footer">Generated on Sat Oct 1 2016 14:01:56 for Paparazzi UAS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
